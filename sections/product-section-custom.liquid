{{ 'section-main-product.css' | asset_url | stylesheet_tag }}


{% if section.settings.section_title != blank %}
<div class="featured-product_2">
<div class="anm-bike-title bike-right tw-mb-6 md:tw-text-left tw-text-center action">
  <h2 class="md:tw-text-5xl tw-text-4xl tw-font-bold">{{ section.settings.section_title }}</h2>
</div>
{% endif %}

<div class="tab-switch-wrapper">
  <div class="tabs-wrapper tw-flex md:tw-gap-4 tw-gap-2 md:tw-flex-nowrap tw-flex-wrap tw-justify-start tw-mb-6">
    {% for block in section.blocks %}
      {%- case block.type -%}
      {%- when 'tab' -%}
        {% if block.settings.tab_label != blank %}
        <div tab-i="{{ block.settings.tab_index }}" class="tab tw-black-tab {% if forloop.first %}active{% endif %} tw-text-xl tw-px-6 tw-py-2 tw-rounded md:tw-w-48 tw-w-[calc(50%-.25rem)]">
          <span>{{ block.settings.tab_label }}</span>
        </div>
        {% endif %}
      {%- endcase -%}
    {% endfor %}
  </div>

<div class="contents-wrapper">
  {% assign first_tab_index = null %}
  {% for block in section.blocks %}
    {% if block.type == 'tab' and first_tab_index == null %}
      {% assign first_tab_index = block.settings.tab_index %}
    {% endif %}
  {% endfor %}
  
  {% for block in section.blocks %}
    {%- case block.type -%}
    {%- when 'tab_content' -%}
        <div 
           class="tw-flex md:tw-flex-nowrap tw-flex-wrap tw-items-center tw-gap-8 tab-content md:tw-text-left tw-text-center"
          tab-i="{{ block.settings.tab_index }}"
          style="{% if block.settings.tab_index != '1' %}display: none;{% endif %}">
          <div class="con-left md:tw-w-2/5 tw-self-stretch tw-order-2">
            <div class="tw-flex tw-flex-col tw-h-full tw-justify-evenly">
              <div class="left-content-wrapper">
                {% if block.settings.title != blank %}
                <h3 class="tw-text-4xl tw-mb-2 tw-font-semibold">
                  <a class="tw-vi-a" href="{{ block.settings.product_url }}">
                    {{ block.settings.title }}
                  </a>
                </h3>
                {% endif %}
                
                {% if block.settings.description != blank %}
                <p class="tw-text-2xl">{{ block.settings.description }}</p>
                {% endif %}

                <div class="tw-flex md:tw-items-end md:tw-justify-start tw-justify-center md:tw-gap-6 tw-gap-2 md:tw-my-4 tw-my-8">
                {% if block.settings.show_price %}
                <div class="md:tw-block tw-flex tw-items-center">
                  {% if block.settings.regular_price != blank %}
                  <p class="tw-text-stone-400 tw-txt-diagonal md:tw-text-lg tw-text-xl tw-mb-0 md:tw-leading-none md:tw-ml-0 tw-ml-2 tw-order-2">{{ block.settings.regular_price }}</p>
                  {% endif %}
                  {% if block.settings.sale_price != blank %}
                  <p class="tw-font-bold tw-text-2xl tw-text-red-600 md:tw-order-3 tw-order-1">{{ block.settings.sale_price }}</p>
                  {% endif %}
                </div>
                {% if block.settings.discount_percentage != blank %}
                <p class="tw-font-semibold md:tw-text-6xl tw-text-2xl tw-text-red-600 tw-relative">
                  <span class="pro_percent tw-font-bold">{{ block.settings.discount_percentage }}%</span>
                  <span class="tw-text-base md:tw-absolute tw-top-0">OFF</span>
                </p>
                {% endif %}
                {% endif %}
              </div>

                <div class="tw-mb-6">
                  {% if block.settings.button_text != blank and block.settings.button_url != blank %}
                    <a href="{{ block.settings.button_url }}" class="button button--secondary tw-py-3 tw-leading-none tw-font-normal tw-min-w-48">{{ block.settings.button_text }}</a>
                  {% endif %}
                    
                  {% if block.settings.secondary_button_text != blank and block.settings.secondary_button_url != blank %}
                    <a href="{{ block.settings.secondary_button_url }}" class="button button--outline tw-py-3 tw-leading-none tw-font-normal tw-min-w-48">{{ block.settings.secondary_button_text }}</a>
                  {% endif %}
                </div>
              </div>

              <div class="left-video-wrapper md:tw-mb-8">
                <div class="tw-grid tw-text-center tw-gap-3 tw-grid-cols-2 xl:tw-w-5/6 tw-w-full">
                  
                  {% if block.settings.feature_1 != blank %}
                  <div class="">
                    <div class="tw-relative tw-rounded-md tw-overflow-hidden tw-cursor-pointer">
                      <div pop-id="{{ block.settings.video_i1 }}" class="tw-mask video-play after:md:tw-w-16 after:md:tw-h-16 after:tw-w-10 after:tw-h-10 !tw-bg-opacity-50 video-pop-js"></div>
                      <img src="{{ block.settings.feature_1 | img_url: 'master' }}" alt="" 
                      srcset="{{ block.settings.feature_1 | img_url: 'master' }} "
                      width="1200" height="900" loading="lazy">
                      </div>
                      {% if block.settings.feature_title_1 != blank %}
                      <p class="tw-font-semibold">{{ block.settings.feature_title_1 }}</p>
                      {% endif %}
                  </div>
                  {% endif %}
                  
                  {% if block.settings.feature_2 != blank %}
                  <div class="">
                    <div class="tw-relative tw-rounded-md tw-overflow-hidden tw-cursor-pointer">
                      <div pop-id="{{ block.settings.video_i2 }}" class="tw-mask video-play after:md:tw-w-16 after:md:tw-h-16 after:tw-w-10 after:tw-h-10 !tw-bg-opacity-50 video-pop-js"></div>
                      <img src="{{ block.settings.feature_2 | img_url: 'master' }}" alt="" 
                      srcset="{{ block.settings.feature_2 | img_url: 'master' }} "
                      width="1200" height="900" loading="lazy">
                      </div>
                      {% if block.settings.feature_title_2 != blank %}
                      <p class="tw-font-semibold">{{ block.settings.feature_title_2 }}</p>
                      {% endif %}
                  </div>
                  {% endif %}
                  
                  {% if block.settings.feature_3 != blank %}
                  <div class="">
                    <div class="tw-relative tw-rounded-md tw-overflow-hidden tw-cursor-pointer">
                      <div pop-id="{{ block.settings.video_i3 }}" class="tw-mask video-play after:md:tw-w-16 after:md:tw-h-16 after:tw-w-10 after:tw-h-10 !tw-bg-opacity-50 video-pop-js"></div>
                      <img src="{{ block.settings.feature_3 | img_url: 'master' }}" alt="" 
                      srcset="{{ block.settings.feature_3 | img_url: 'master' }} "
                      width="1200" height="900" loading="lazy">
                      </div>
                      {% if block.settings.feature_title_3 != blank %}
                      <p class="tw-font-semibold">{{ block.settings.feature_title_3 }}</p>
                      {% endif %}
                  </div>
                  {% endif %}
                  
                  {% if block.settings.feature_4 != blank %}
                  <div class="">
                    <div class="tw-relative tw-rounded-md tw-overflow-hidden tw-cursor-pointer">
                      <div pop-id="{{ block.settings.video_i4 }}" class="tw-mask video-play after:md:tw-w-16 after:md:tw-h-16 after:tw-w-10 after:tw-h-10 !tw-bg-opacity-50 video-pop-js"></div>
                      <img src="{{ block.settings.feature_4 | img_url: 'master' }}" alt="" 
                      srcset="{{ block.settings.feature_4 | img_url: 'master' }} "
                      width="1200" height="900" loading="lazy">
                      </div>
                      {% if block.settings.feature_title_4 != blank %}
                      <p class="tw-font-semibold">{{ block.settings.feature_title_4 }}</p>
                      {% endif %}
                  </div>
                  {% endif %}
                </div>
              </div>
            </div>
          </div>

          <div class="con-right md:tw-w-3/5 tw-relative md:tw-order-3 tw-order-1">
            {% if block.settings.product_image != blank %}
            <img src="{{ block.settings.product_image | img_url: 'master' }}" alt="" 
            srcset="{{ block.settings.product_image | img_url: 'master' }} "
            width="1200" height="900" loading="lazy" class="tw-object-cover" >
            {% endif %}

            <div class="video-pin-wrapper tw-absolute tw-top-0 tw-left-0 tw-w-full tw-h-full">
              {% if block.settings.feature_title_1 != blank %}
              <span  style="left:{{ block.settings.position_x1 }}%;top:{{ block.settings.position_y1 }}%" pop-id="{{ block.settings.video_i1 }}" class="video-pop-js tw-absolute">
                <a href="#_" class="pin-button tw-group  hover:tw-w-52 ">
                  <span class="btn-text group-hover:tw-translate-x-0">
                    {{ block.settings.feature_title_1 }}
                    <svg role="presentation" fill="none" focusable="false" width="14" height="14" class="icon icon-play-video" viewBox="0 0 24 24">
                      <path d="M5.77038 23.5048C5.43762 23.7187 5 23.4798 5 23.0842L5 0.915832C5 0.520249 5.43762 0.281329 5.77038 0.495243L23.0124 11.5794C23.3186 11.7762 23.3186 12.2238 23.0124 12.4206L5.77038 23.5048Z" fill="currentColor"></path>
                    </svg>
                  </span>
                  <span class="group-hover:tw-translate-x-full btn-icon">
                    <svg role="presentation" focusable="false" stroke-width="2" width="16" height="16" class="icon icon-plus" viewBox="0 0 12 12">
                      <path d="M6 0V12" fill="none" stroke="currentColor"></path>
                      <path d="M0 6L12 6" fill="none" stroke="currentColor"></path>
                    </svg>
                  </span>
                  <span class="tw-relative tw-invisible tw-text-nowrap ">{{ block.settings.feature_title_1 }}</span>
                </a>
              </span>
              {% endif %}

              {% if block.settings.feature_title_2 != blank %}
              <span  style="left:{{ block.settings.position_x2 }}%;top:{{ block.settings.position_y2 }}%" pop-id="{{ block.settings.video_i2 }}" class="video-pop-js tw-absolute">
                <a href="#_" class="pin-button tw-group  hover:tw-w-52 ">
                  <span class="btn-text group-hover:tw-translate-x-0">
                    {{ block.settings.feature_title_2 }}
                    <svg role="presentation" fill="none" focusable="false" width="14" height="14" class="icon icon-play-video" viewBox="0 0 24 24">
                      <path d="M5.77038 23.5048C5.43762 23.7187 5 23.4798 5 23.0842L5 0.915832C5 0.520249 5.43762 0.281329 5.77038 0.495243L23.0124 11.5794C23.3186 11.7762 23.3186 12.2238 23.0124 12.4206L5.77038 23.5048Z" fill="currentColor"></path>
                    </svg>
                  </span>
                  <span class="group-hover:tw-translate-x-full btn-icon">
                    <svg role="presentation" focusable="false" stroke-width="2" width="16" height="16" class="icon icon-plus" viewBox="0 0 12 12">
                      <path d="M6 0V12" fill="none" stroke="currentColor"></path>
                      <path d="M0 6L12 6" fill="none" stroke="currentColor"></path>
                    </svg>
                  </span>
                  <span class="tw-relative tw-invisible tw-text-nowrap ">{{ block.settings.feature_title_2 }}</span>
                </a>
              </span>
              {% endif %}

              {% if block.settings.feature_title_3 != blank %}
              <span style="left:{{ block.settings.position_x3 }}%;top:{{ block.settings.position_y3 }}%" pop-id="{{ block.settings.video_i3 }}" class="video-pop-js tw-absolute">
                <a href="#_" class="pin-button tw-group  hover:tw-w-44 ">
                  <span class="btn-text group-hover:tw-translate-x-0">
                    {{ block.settings.feature_title_3 }}
                    <svg role="presentation" fill="none" focusable="false" width="14" height="14" class="icon icon-play-video" viewBox="0 0 24 24">
                      <path d="M5.77038 23.5048C5.43762 23.7187 5 23.4798 5 23.0842L5 0.915832C5 0.520249 5.43762 0.281329 5.77038 0.495243L23.0124 11.5794C23.3186 11.7762 23.3186 12.2238 23.0124 12.4206L5.77038 23.5048Z" fill="currentColor"></path>
                    </svg>
                  </span>
                  <span class="group-hover:tw-translate-x-full btn-icon">
                    <svg role="presentation" focusable="false" stroke-width="2" width="16" height="16" class="icon icon-plus" viewBox="0 0 12 12">
                      <path d="M6 0V12" fill="none" stroke="currentColor"></path>
                      <path d="M0 6L12 6" fill="none" stroke="currentColor"></path>
                    </svg>
                  </span>
                  <span class="tw-relative tw-invisible tw-text-nowrap ">{{ block.settings.feature_title_3 }}</span>
                </a>
              </span>
              {% endif %}

              {% if block.settings.feature_title_4 != blank %}
              <span  style="left:{{ block.settings.position_x4 }}%;top:{{ block.settings.position_y4 }}%" pop-id="{{ block.settings.video_i4 }}"  class="video-pop-js tw-absolute">
                <a href="#_" class="pin-button tw-group  hover:tw-w-44 ">
                  <span class="btn-text group-hover:tw-translate-x-0">
                    {{ block.settings.feature_title_4 }}
                    <svg role="presentation" fill="none" focusable="false" width="14" height="14" class="icon icon-play-video" viewBox="0 0 24 24">
                      <path d="M5.77038 23.5048C5.43762 23.7187 5 23.4798 5 23.0842L5 0.915832C5 0.520249 5.43762 0.281329 5.77038 0.495243L23.0124 11.5794C23.3186 11.7762 23.3186 12.2238 23.0124 12.4206L5.77038 23.5048Z" fill="currentColor"></path>
                    </svg>
                  </span>
                  <span class="group-hover:tw-translate-x-full btn-icon">
                    <svg role="presentation" focusable="false" stroke-width="2" width="16" height="16" class="icon icon-plus" viewBox="0 0 12 12">
                      <path d="M6 0V12" fill="none" stroke="currentColor"></path>
                      <path d="M0 6L12 6" fill="none" stroke="currentColor"></path>
                    </svg>
                  </span>
                  <span class="tw-relative tw-invisible tw-text-nowrap ">{{ block.settings.feature_title_4 }}</span>
                </a>
              </span>
              {% endif %}
            </div>
          </div>
          <div style="display:none" pop-id="{{ block.settings.video_i1 }}"
          class="video-pop-wrapper tw-fixed tw-top-0 tw-left-0 tw-w-full tw-h-full tw-z-50">
          <div class="tw-mask !tw-bg-opacity-70"></div>
          <div
            class="tw-absolute tw-w-5/6 !tw-bg-white tw-top-1/2 tw-left-1/2 -tw-translate-x-1/2 -tw-translate-y-1/2 tw-shadow-xl tw-rounded-3xl md:tw-p-8 tw-p-2 tw-pb-8 ">
            <div class="md:tw-flex tw-items-center md:tw-gap-12">
              <div
                class="tw-flex tw-items-center md:tw-w-1/2 tw-justify-center video tw-self-stretch tw-rounded-2xl tw-overflow-hidden md:tw-mb-0 tw-mb-4">
                <video-media autoplay="">
                  <video playsinline controls poster="{{ block.settings.video_poster1 | img_url: '800x' }}">
                    <source src="{{ block.settings.video_url1 }}" type="video/mp4">
                  </video>
                  </video-media>
                  </div>
              <div class="md:tw-w-1/2">
                <h3 class="md:tw-text-4xl tw-text-2xl md:tw-mb-6 tw-mb-4">{{ block.settings.feature_title_1 }}</h3>
                <p class="md:tw-mb-12 tw-mb-6 md:tw-text-2xl tw-text-xl">{{ block.settings.feature_des_1 }}</p>
                <ul class="tw-grid tw-gap-4 md:tw-grid-cols-3 tw-grid-cols-2">
                </ul>
              </div>
            </div>
            <a href="javascript:;" class="tw-absolute md:tw-top-6 md:tw-right-6 tw-top-4 tw-right-4 close-js"><svg
                role="presentation" stroke-width="2" focusable="false" width="40" height="40" class="icon icon-close"
                viewBox="0 0 24 24">
                <path d="M17.658 6.343 6.344 17.657M17.658 17.657 6.344 6.343" stroke="currentColor"></path>
              </svg></a>
          </div>
        </div>


        <div style="display:none" pop-id="{{ block.settings.video_i2 }}"
          class="video-pop-wrapper tw-fixed tw-top-0 tw-left-0 tw-w-full tw-h-full tw-z-50">
          <div class="tw-mask !tw-bg-opacity-70"></div>
          <div
            class="tw-absolute tw-w-5/6 !tw-bg-white tw-top-1/2 tw-left-1/2 -tw-translate-x-1/2 -tw-translate-y-1/2 tw-shadow-xl tw-rounded-3xl md:tw-p-8 tw-p-2 tw-pb-8 ">
            <div class="md:tw-flex tw-items-center md:tw-gap-12">
              <div
                class="tw-flex tw-items-center md:tw-w-1/2 tw-justify-center video tw-self-stretch tw-rounded-2xl tw-overflow-hidden md:tw-mb-0 tw-mb-4">
                <video-media autoplay="">
                  <video playsinline controls poster="{{ block.settings.video_poster2 | img_url: '800x' }}">
                    <source src="{{ block.settings.video_url2 }}" type="video/mp4">
                  </video>
                  </video-media>
                </div>
              <div class="md:tw-w-1/2">
                <h3 class="md:tw-text-4xl tw-text-2xl md:tw-mb-6 tw-mb-4">{{ block.settings.feature_title_2 }}</h3>
                <p class="md:tw-mb-12 tw-mb-6 md:tw-text-2xl tw-text-xl">{{ block.settings.feature_des_2 }}</p>
                <ul class="tw-grid tw-gap-4 md:tw-grid-cols-3 tw-grid-cols-2">
                </ul>
              </div>
            </div>
            <a href="javascript:;" class="tw-absolute md:tw-top-6 md:tw-right-6 tw-top-4 tw-right-4 close-js"><svg
                role="presentation" stroke-width="2" focusable="false" width="40" height="40" class="icon icon-close"
                viewBox="0 0 24 24">
                <path d="M17.658 6.343 6.344 17.657M17.658 17.657 6.344 6.343" stroke="currentColor"></path>
              </svg></a>
          </div>
        </div>


        <div style="display:none" pop-id="{{ block.settings.video_i3 }}"
          class="video-pop-wrapper tw-fixed tw-top-0 tw-left-0 tw-w-full tw-h-full tw-z-50">
          <div class="tw-mask !tw-bg-opacity-70"></div>
          <div
            class="tw-absolute tw-w-5/6 !tw-bg-white tw-top-1/2 tw-left-1/2 -tw-translate-x-1/2 -tw-translate-y-1/2 tw-shadow-xl tw-rounded-3xl md:tw-p-8 tw-p-2 tw-pb-8 ">
            <div class="md:tw-flex tw-items-center md:tw-gap-12">
              <div
                class="tw-flex tw-items-center md:tw-w-1/2 tw-justify-center video tw-self-stretch tw-rounded-2xl tw-overflow-hidden md:tw-mb-0 tw-mb-4">
           
                <video-media autoplay="">
                  <video playsinline controls poster="{{ block.settings.video_poster3 | img_url: '800x' }}">
                    <source src="{{ block.settings.video_url3 }}" type="video/mp4">
                  </video>
                  </video-media>
                  </div>
              <div class="md:tw-w-1/2">
                <h3 class="md:tw-text-4xl tw-text-2xl md:tw-mb-6 tw-mb-4">{{ block.settings.feature_title_3 }}</h3>
                <p class="md:tw-mb-12 tw-mb-6 md:tw-text-2xl tw-text-xl">{{ block.settings.feature_des_3 }}</p>
                <ul class="tw-grid tw-gap-4 md:tw-grid-cols-3 tw-grid-cols-2">
                </ul>
              </div>
            </div>
            <a href="javascript:;" class="tw-absolute md:tw-top-6 md:tw-right-6 tw-top-4 tw-right-4 close-js"><svg
                role="presentation" stroke-width="2" focusable="false" width="40" height="40" class="icon icon-close"
                viewBox="0 0 24 24">
                <path d="M17.658 6.343 6.344 17.657M17.658 17.657 6.344 6.343" stroke="currentColor"></path>
              </svg></a>
          </div>
        </div>

        <div style="display:none" pop-id="{{ block.settings.video_i4 }}"
          class="video-pop-wrapper tw-fixed tw-top-0 tw-left-0 tw-w-full tw-h-full tw-z-50">
          <div class="tw-mask !tw-bg-opacity-70"></div>
          <div
            class="tw-absolute tw-w-5/6 !tw-bg-white tw-top-1/2 tw-left-1/2 -tw-translate-x-1/2 -tw-translate-y-1/2 tw-shadow-xl tw-rounded-3xl md:tw-p-8 tw-p-2 tw-pb-8 ">
            <div class="md:tw-flex tw-items-center md:tw-gap-12">
              <div
                class="tw-flex tw-items-center md:tw-w-1/2 tw-justify-center video tw-self-stretch tw-rounded-2xl tw-overflow-hidden md:tw-mb-0 tw-mb-4">
        
                <video-media autoplay="">
                  <video playsinline controls poster="{{ block.settings.video_poster4 | img_url: '800x' }}">
                    <source src="{{ block.settings.video_url4 }}" type="video/mp4">
                  </video>
                  </video-media>
                </div>
              <div class="md:tw-w-1/2">
                <h3 class="md:tw-text-4xl tw-text-2xl md:tw-mb-6 tw-mb-4">{{ block.settings.feature_title_4 }}</h3>
                <p class="md:tw-mb-12 tw-mb-6 md:tw-text-2xl tw-text-xl">{{ block.settings.feature_des_4 }}</p>
                <ul class="tw-grid tw-gap-4 md:tw-grid-cols-3 tw-grid-cols-2">
                </ul>
              </div>
            </div>
            <a href="javascript:;" class="tw-absolute md:tw-top-6 md:tw-right-6 tw-top-4 tw-right-4 close-js"><svg
                role="presentation" stroke-width="2" focusable="false" width="40" height="40" class="icon icon-close"
                viewBox="0 0 24 24">
                <path d="M17.658 6.343 6.344 17.657M17.658 17.657 6.344 6.343" stroke="currentColor"></path>
              </svg></a>
          </div>
        </div>

        </div>
    {%- endcase -%}
    {% endfor %}
</div>
</div>
</div>

<script>
  function autoResponsive() {
  const width = document.body.clientWidth || window.innerWidth;
  
  if (width < 1025 && width >= 750) {
      const scale = width / 1023;
      const content = 'width=1023, initial-scale=' + scale + ', minimum-scale=' + scale + ', maximum-scale=' + scale + ', viewport-fit=cover';
      const metaViewport = document.querySelector('meta[name="viewport"]');
      if (metaViewport) {
          metaViewport.setAttribute("content", content);
      }
  }
  
  if (width < 460) {
      const scale = width / 460;
      const content = 'width=460, initial-scale=' + scale + ', minimum-scale=' + scale + ', maximum-scale=' + scale + ', viewport-fit=cover';
      const metaViewport = document.querySelector('meta[name="viewport"]');
      if (metaViewport) {
          metaViewport.setAttribute("content", content);
      }
  }
}
autoResponsive();
document.addEventListener("DOMContentLoaded", function() {
  // Tab switching functionality for the main product tabs
  function switchTab() {
    $(".tab-switch-wrapper .tabs-wrapper .tab").click(function() {
      const tabId = $(this).attr('tab-i');
      // Hide all tab contents first
      $(this).closest('.tab-switch-wrapper').find('.tab-content').hide();
      // Show the matching tab content
      const contentWrap = $(this).closest('.tab-switch-wrapper').find('.tab-content[tab-i="' + tabId + '"]');
      contentWrap.fadeIn(150);
      
      // Update active state on tabs
      $(this).siblings().removeClass("active");
      $(this).addClass("active");
    });
  }
  
  // Initialize tab switching if tabs exist
  if($(".tab-switch-wrapper").length) switchTab();

  // Animation for title elements on scroll
  function handleScrollEvent() {
    const targetElements = $('.anm-bike-title');
    const windowHeight = $(window).height();
    let isScrolling = false;
    $(window).scroll(() => {
      if (!isScrolling) {
        requestAnimationFrame(() => {
          targetElements.each(function() {
            const elementOffset = $(this).offset().top;
            const scrollTop = $(window).scrollTop();
            if (scrollTop + windowHeight > elementOffset) {
              $(this).addClass('action');
            }
          });
          isScrolling = false;
        });
        isScrolling = true;
      }
    });
  }
  handleScrollEvent();
 
  // Video popup functionality
  $(".video-pop-wrapper").on("click", ".close-js, .tw-mask", function(e) {
    $(this).closest(".video-pop-wrapper").fadeOut();
    // Pause videos (including iframe)
    var videoElement = $(this).closest(".video-pop-wrapper").find("video")[0];
    if (videoElement) {
      videoElement.pause();
    }
    var iframeElement = $(this).closest(".video-pop-wrapper").find("iframe")[0];
    if (iframeElement) {
      var iframeSrc = iframeElement.src;
      iframeElement.src = iframeSrc; // Reset iframe src to pause it
    }
  });

  // 创建一个通用函数来显示视频弹窗
  function showVideoPopup(popId) {
    if (!popId) return;
    
    const videoWrap = $('.video-pop-wrapper[pop-id="' + popId + '"]');
    if (videoWrap.length) {
      videoWrap.fadeIn();
      
      // 播放视频
      const videoElement = videoWrap.find('video')[0];
      if (videoElement && videoElement.paused) {
        videoElement.play();
      }
      
      const iframeElement = videoWrap.find('iframe')[0];
      if (iframeElement) {
        const iframeSrc = iframeElement.src;
        iframeElement.src = iframeSrc; // 重置iframe源以播放
      }
    }
  }

  // 为视频弹出元素添加点击事件
  $('.video-pop-js').click(function(e) {
    e.preventDefault();
    e.stopPropagation();
    const popId = $(this).attr('pop-id');
    showVideoPopup(popId);
  });
  
  // 为产品特性图上的加号按钮添加点击事件
  $('.pin-button').click(function(e) {
    e.preventDefault();
    e.stopPropagation(); // 阻止事件冒泡
    const popId = $(this).closest('.video-pop-js').attr('pop-id');
    showVideoPopup(popId);
  });
  
  // 为按钮内部的元素单独添加点击事件
  $('.btn-icon, .btn-text').click(function(e) {
    e.preventDefault();
    e.stopPropagation(); // 阻止事件冒泡
    const popId = $(this).closest('.video-pop-js').attr('pop-id');
    showVideoPopup(popId);
  });
});
</script>

{% schema %}
  {
    "name": "Tabs Section",
    "class": "tabs-section section",
    "tag":"section",
    "settings": [
      {
        "type": "text",
        "id": "section_title",
        "label": "Section Title (eg: Explore Our Products)",
        "default": "Explore Our Cool Models"
      }
    ],
    "blocks": [
      {
        "type": "tab",
        "name": "Tab",
        "settings": [
          {
            "type": "text",
            "id": "tab_index",
            "label": "Tab Index - Must be a number (eg: 1, 2, 3)"
          },
          {
            "type": "text",
            "id": "tab_label",
            "label": "Tab Label - Tab name shown to customers (eg: Model A)"
          }
        ]
      },
      {
        "type": "tab_content",
        "name": "Tab Content",
        "settings": [
          {
            "type": "text",
            "id": "tab_index",
            "label": "Tab Index - Must match a Tab Index above (eg: 1)"
          },
          {
            "type": "text",
            "id": "title",
            "label": "Product Title (eg: Premium Bike Model X)"
          },
          {
            "type": "url",
            "id": "product_url",
            "label": "Product URL - Link to product page (eg: /products/bike-x)"
          },
          {
            "type": "textarea",
            "id": "description",
            "label": "Product Description (eg: This premium bike features...)"
          },
          {
            "type": "checkbox",
            "id": "show_price",
            "label": "Show Price Section",
            "default": true
          },
          {
            "type": "text",
            "id": "regular_price",
            "label": "Regular Price (eg: $1,299)"
          },
          {
            "type": "text",
            "id": "sale_price",
            "label": "Sale Price (eg: $999)"
          },
          {
            "type": "text",
            "id": "discount_percentage",
            "label": "Discount Percentage - Without % symbol (eg: 20)"
          },
          {
            "type": "text",
            "id": "button_text",
            "label": "Primary Button Text (eg: Buy Now)"
          },
          {
            "type": "url",
            "id": "button_url",
            "label": "Primary Button URL (eg: /products/bike-x)"
          },
          {
            "type": "text",
            "id": "secondary_button_text",
            "label": "Secondary Button Text (eg: Learn More)"
          },
          {
            "type": "url",
            "id": "secondary_button_url",
            "label": "Secondary Button URL (eg: /pages/about-bike-x)"
          },
          {
            "type": "header",
            "content": "Feature 1"
          },
          {
            "type": "text",
            "id": "video_i1",
            "label": "Video ID - Unique identifier (eg: feature1)"
          },
          {
            "type": "url",
            "id": "video_url1",
            "label": "Video URL - Must be direct MP4 file (eg: video.mp4)"
          },
          {
            "type": "image_picker",
            "id": "video_poster1",
            "label": "Video Poster - Thumbnail shown before video plays"
          },
          {
            "type": "image_picker",
            "id": "feature_1",
            "label": "Feature Image - Thumbnail in product features grid"
          },
          {
            "type": "text",
            "id": "feature_title_1",
            "label": "Feature Title (eg: Carbon Frame)"
          },
          {
            "type": "textarea",
            "id": "feature_des_1",
            "label": "Feature Description (eg: Our carbon frame is lightweight)"
          },
          {
          "type": "number",
          "id": "position_x1",
          "label": "Horizontal Position (%) - Controls feature pin location",
          "default": 36
        },
        {
          "type": "number",
          "id": "position_y1",
          "label": "Vertical Position (%) - Controls feature pin location",
          "default": 51
        },
          {
            "type": "header",
            "content": "Feature 2"
          },
          {
            "type": "text",
            "id": "video_i2",
            "label": "Video ID - Unique identifier (eg: feature2)"
          },
          {
            "type": "url",
            "id": "video_url2",
            "label": "Video URL - Must be direct MP4 file (eg: video.mp4)"
          },
          {
            "type": "image_picker",
            "id": "video_poster2",
            "label": "Video Poster - Thumbnail shown before video plays"
          },
          {
            "type": "image_picker",
            "id": "feature_2",
            "label": "Feature Image - Thumbnail in product features grid"
          },
          {
            "type": "text",
            "id": "feature_title_2",
            "label": "Feature Title (eg: Hydraulic Suspension)"
          },
          {
            "type": "textarea",
            "id": "feature_des_2",
            "label": "Feature Description (eg: Advanced suspension for smoother rides)"
          },
          {
          "type": "number",
          "id": "position_x2",
          "label": "Horizontal Position (%) - Controls feature pin location",
          "default": 48
        },
        {
          "type": "number",
          "id": "position_y2",
          "label": "Vertical Position (%) - Controls feature pin location",
          "default": 42
        },
          {
            "type": "header",
            "content": "Feature 3"
          },
          {
            "type": "text",
            "id": "video_i3",
            "label": "Video ID - Unique identifier (eg: feature3)"
          },
          {
            "type": "url",
            "id": "video_url3",
            "label": "Video URL - Must be direct MP4 file (eg: video.mp4)"
          },
          {
            "type": "image_picker",
            "id": "video_poster3",
            "label": "Video Poster - Thumbnail shown before video plays"
          },
          {
            "type": "image_picker",
            "id": "feature_3",
            "label": "Feature Image - Thumbnail in product features grid"
          },
          {
            "type": "text",
            "id": "feature_title_3",
            "label": "Feature Title (eg: Disc Brakes)"
          },
          {
            "type": "textarea",
            "id": "feature_des_3",
            "label": "Feature Description (eg: Powerful braking system)"
          },
          {
          "type": "number",
          "id": "position_x3",
          "label": "Horizontal Position (%) - Controls feature pin location",
          "default": 67
        },
        {
          "type": "number",
          "id": "position_y3",
          "label": "Vertical Position (%) - Controls feature pin location",
          "default": 14
        },
          {
            "type": "header",
            "content": "Feature 4"
          },
          {
            "type": "text",
            "id": "video_i4",
            "label": "Video ID - Unique identifier (eg: feature4)"
          },
          {
            "type": "url",
            "id": "video_url4",
            "label": "Video URL - Must be direct MP4 file (eg: video.mp4)"
          },
          {
            "type": "image_picker",
            "id": "video_poster4",
            "label": "Video Poster - Thumbnail shown before video plays"
          },
          {
            "type": "image_picker",
            "id": "feature_4",
            "label": "Feature Image - Thumbnail in product features grid"
          },
          {
            "type": "text",
            "id": "feature_title_4",
            "label": "Feature Title (eg: Electronic Gear System)"
          },
          {
            "type": "textarea",
            "id": "feature_des_4",
            "label": "Feature Description (eg: Electronic shifting for precision)"
          },
          {
          "type": "number",
          "id": "position_x4",
          "label": "Horizontal Position (%) - Controls feature pin location",
          "default": 15     
        },
        {
          "type": "number",
          "id": "position_y4",
          "label": "Vertical Position (%) - Controls feature pin location",
          "default": 70
        },
          {
            "type": "image_picker",
            "id": "product_image",
            "label": "Main Product Image - Large image with feature pin points"
          }
        ]
      }
    ],
    "presets": [
      {
        "name": "Tabs Section",
        "blocks": [
          {
            "type": "tab",
            "settings": {
              "tab_index": "1",
              "tab_label": "V1 Velo"
            }
          },
          {
            "type": "tab",
            "settings": {
              "tab_index": "2",
              "tab_label": "F3 Adventurer"
            }
          },
          {
            "type": "tab_content",
            "settings": {
              "tab_index": "1",
              "title": "V1 Velo Product"
            }
          },
          {
            "type": "tab_content",
            "settings": {
              "tab_index": "2",
              "title": "F3 Adventurer Product"
            }
          }
        ]
      }
    ]
  }
{% endschema %}